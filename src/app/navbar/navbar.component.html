<nav class="mat-elevation-z3">
  <mat-toolbar class="nav-toolbar">

    <button mat-icon-button fxHide="false" fxHide.gt-xs>
      <i class="fas fa-bars"></i>
    </button>

    <button mat-button routerLink="" routerLinkActive="active" class="logo-button">
      Project Reentry
    </button>
    <button mat-button routerLink="about" routerLinkActive="active" fxShow="false" fxShow.gt-xs>
      About Us
    </button>

    <span class="spacer"></span>

    <mat-menu #userMenu="matMenu">
      <button mat-menu-item [matMenuTriggerFor]="adminMenu" *ngIf="user.isAdmin">
        <span><i class="fas fa-cogs"></i> Admin</span>
      </button>
      <button mat-menu-item (click)="user.logout()">
        <span><i class="fas fa-sign-out-alt"></i> Log Out</span>
      </button>
    </mat-menu>

    <mat-menu #adminMenu="matMenu">
      <button mat-menu-item routerLink="admin/organizations" routerLinkActive="active"><i class="fas fa-landmark"></i> Organizations</button>
      <button mat-menu-item routerLink="admin/users" routerLinkActive="active"><i class="fas fa-users"></i> Users</button>
    </mat-menu>

    <div *ngIf="user.authState | async as authState; else login" fxLayout="row" fxShow="false" fxShow.gt-xs>
      <button mat-button [matMenuTriggerFor]="userMenu">
        <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="0.5em">
          <img class="nav-user-photo" src="{{authState.photoURL}}" alt="">
          <span>{{authState.displayName}}</span>
        </div>
      </button>
    </div>

    <ng-template #login>
      <button mat-button (click)="user.login()">
        <span><i class="fas fa-sign-in-alt"></i> Log In</span>
      </button>
    </ng-template>

  </mat-toolbar>
</nav>
